<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giá Coin - Dữ liệu copyright Vũ Đức Phước</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: auto; border-collapse: collapse; }
        th, td { border: 1px solid black; padding: 10px; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <h2>Giá Coin theo thời gian thực</h2>
    <table>
        <thead>
            <tr>
                <th>Coin</th>
                <th>Giá hiện tại (USD)</th>
                <th>Thay đổi 24h (%)</th>
            </tr>
        </thead>
        <tbody id="cryptoTable"></tbody>
    </table>

    <h3>Lịch sử giá</h3>
    <pre id="history"></pre>

    <p><strong>Dữ liệu copyright Vũ Đức Phước</strong></p>

    <script>
        const coins = ["BTCUSDT", "ETHUSDT", "BNBUSDT", "ADAUSDT", "XRPUSDT"];
        let priceHistory = {};

        async function fetchPrices() {
            const tableBody = document.getElementById("cryptoTable");
            tableBody.innerHTML = "";
            for (let coin of coins) {
                const response = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${coin}`);
                const data = await response.json();
                const price = parseFloat(data.lastPrice).toFixed(2);
                const change = parseFloat(data.priceChangePercent).toFixed(2);

                // Lưu lịch sử giá
                if (!priceHistory[coin]) priceHistory[coin] = [];
                priceHistory[coin].push(price);
                if (priceHistory[coin].length > 10) priceHistory[coin].shift(); // Giữ lịch sử ngắn

                tableBody.innerHTML += `
                    <tr>
                        <td>${coin.replace("USDT", "")}</td>
                        <td>${price}</td>
                        <td style="color: ${change >= 0 ? "green" : "red"};">${change}%</td>
                    </tr>
                `;
            }
            document.getElementById("history").innerText = JSON.stringify(priceHistory, null, 2);
        }

        fetchPrices();
        setInterval(fetchPrices, 5000); // Cập nhật mỗi 5 giây
    </script>

</body>
</html>
